Tui.init()

var nameInput = Tui.create_text_input(10, 5, 40, "Enter your name...")
nameInput.set_style("black", "white", Null)
var emailInput = Tui.create_text_input(10, 10, 40, "Enter your email...")

var focusedInput = 0

nameInput.set_focused(true)

while true do
    Tui.clear()
    
    Tui.draw_block(5, 2, 50, 16, "Registration Form", "cyan")
    Tui.draw_text(7, 3, 46, 1, "Use Tab to switch fields", "black", Null)
    
    nameInput.render()
    emailInput.render()
    
    Tui.render()
    
    var input = Term.get_input()
    
    if input do
        if input.key() == "Tab" do
            focusedInput = (focusedInput + 1) % 2
            nameInput.set_focused(focusedInput == 0)
            emailInput.set_focused(focusedInput == 1)
        else if input.key() == "Enter" do
            Term.clear()
            println("Name: " + nameInput.get_text())
            println("Email: " + emailInput.get_text())
            break
        else if input.key() == "Esc" do
            break
        else if input.key() do
            if focusedInput == 0 do
                nameInput.handle_key(input.key())
            else do
                emailInput.handle_key(input.key())
            end
        end
    end
    
    Sys.sleep(16)
end

Tui.cleanup()